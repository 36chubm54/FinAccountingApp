# FinAccountingApp

–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –∏ –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —É—á—ë—Ç–∞ —Å –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å—é, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –æ—Ç—á—ë—Ç–∞–º–∏.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#Ô∏è-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- [–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](#-–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API](#-–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π-api)
- [–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#-—Ñ–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [–¢–µ—Å—Ç—ã](#-—Ç–µ—Å—Ç—ã)
- [–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã](#-–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ-–≤–∞–ª—é—Ç—ã)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- pip

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "–ü—Ä–æ–µ–∫—Ç –§–£/project"

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows PowerShell)
.\.venv\Scripts\Activate.ps1

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows CMD)
.venv\Scripts\activate.bat

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/macOS)
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
python main.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Financial Accounting.

---

## üñ•Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `python main.py` –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –±–ª–æ–∫–æ–º –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏.

–í–∫–ª–∞–¥–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è:

- `Infographics` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏ (–∫—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Å—è—Ü—É/–≥–æ–¥—É.
- `Operations` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞.
- `Reports` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç.
- `Settings` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏.

–ò–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∞:

- –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –º–µ—Å—è—Ü–∞.
- –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –¥–Ω—è–º –º–µ—Å—è—Ü–∞.
- –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º –≥–æ–¥–∞.

–î–æ—Ö–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º, —Ä–∞—Å—Ö–æ–¥—ã ‚Äî –∫—Ä–∞—Å–Ω—ã–º. –î–ª—è –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã –º–∞–ª—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –≤ ¬´Other¬ª. –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –ª–µ–≥–µ–Ω–¥–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞/—Ä–∞—Å—Ö–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É `Operations`.
2. –í –±–ª–æ–∫–µ `Add operation` –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (`Income` –∏–ª–∏ `Expense`).
3. –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD` (–¥–∞—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º).
4. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É.
5. –£–∫–∞–∂–∏—Ç–µ –≤–∞–ª—é—Ç—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `KZT`).
6. –£–∫–∞–∂–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `General`).
7. –ù–∞–∂–º–∏—Ç–µ `Save`.

–°—É–º–º–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –±–∞–∑–æ–≤—É—é –≤–∞–ª—é—Ç—É `KZT` –ø–æ —Ç–µ–∫—É—â–∏–º –∫—É—Ä—Å–∞–º —Å–µ—Ä–≤–∏—Å–∞ –≤–∞–ª—é—Ç. –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É `Reports`.
2. –í–≤–µ–¥–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
    - `Period` ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å –¥–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `2025` –∏–ª–∏ `2025-01`).
    - `Category` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
3. –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏–∏:
    - `Group by category` ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
    - `Display as table` ‚Äî —Ç–∞–±–ª–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.
4. –ù–∞–∂–º–∏—Ç–µ `Generate`.

–í–Ω–∏–∑—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ¬´Monthly Income/Expense Summary¬ª –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ–¥–∞ –∏ –º–µ—Å—è—Ü–µ–≤.

–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞:

- –§–æ—Ä–º–∞—Ç—ã: `CSV`, `XLSX`, `PDF`.
- –ö—Ä–æ–º–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, –≤ `XLSX` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ª–∏—Å—Ç `Yearly Report` —Å –ø–æ–º–µ—Å—è—á–Ω–æ–π —Å–≤–æ–¥–∫–æ–π. –¢–∞–∫–∂–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ç–æ—Ä–æ–π, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ª–∏—Å—Ç `By Category` —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∑–∞–ø–∏—Å–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –ø–æ–¥—Å—É–º–º–∞–º–∏.
- –í `PDF` –ø–æ–º–µ—Å—è—á–Ω–∞—è —Å–≤–æ–¥–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è, –∞ –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π –≤—ã–ø–∏—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–∫–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–¥—Å—É–º–º–æ–π).

### Opening Balance in Filtered Reports

- `Initial balance` ‚Äî –Ω–∞—á–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏; –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∏–ª—å—Ç—Ä–∞.
- `Opening balance` ‚Äî –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ –Ω–∞—á–∞–ª–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞; –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.
- –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ `YYYY` —Å—Ç–∞—Ä—Ç –ø–µ—Ä–∏–æ–¥–∞: `YYYY-01-01`.
- –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ `YYYY-MM` —Å—Ç–∞—Ä—Ç –ø–µ—Ä–∏–æ–¥–∞: `YYYY-MM-01`.
- –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ `YYYY-MM-DD` —Å—Ç–∞—Ä—Ç –ø–µ—Ä–∏–æ–¥–∞: —É–∫–∞–∑–∞–Ω–Ω–∞—è –¥–∞—Ç–∞.
- –§–æ—Ä–º—É–ª–∞:
  `opening_balance = initial_balance + sum(signed_amount for date < start_date)`.
- –í –æ—Ç—á—ë—Ç–∞—Ö —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `opening_balance` –∏ –ø–æ–¥–ø–∏—Å—å `Opening balance as of <start_date>`.
- –í –æ—Ç—á—ë—Ç–∞—Ö –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `initial balance` –∏ –ø–æ–¥–ø–∏—Å—å `Initial balance`.
- –≠–∫—Å–ø–æ—Ä—Ç `CSV/XLSX/PDF` –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç—É –∂–µ –ª–æ–≥–∏–∫—É: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –≤ —Å—Ç—Ä–æ–∫–µ –±–∞–ª–∞–Ω—Å–∞.
- –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏: –∏—Ç–æ–≥ –ø–µ—Ä–∏–æ–¥–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞, –∞ –Ω–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏.

### –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É `Operations`.
2. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø–∏—Å—å –∏–∑ —Å–ø–∏—Å–∫–∞.
3. –ù–∞–∂–º–∏—Ç–µ `Delete Selected`. –ü–æ—è–≤–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ —Å –∏–Ω–¥–µ–∫—Å–æ–º –∑–∞–ø–∏—Å–∏.

### –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É `Operations`.
2. –í –±–ª–æ–∫–µ `List of operations` –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø–∏—Å—å –∏–∑ —Å–ø–∏—Å–∫–∞.
3. –ù–∞–∂–º–∏—Ç–µ `Delete All Records` –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ. –ó–∞–ø–∏—Å–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –∞ —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –æ–±–Ω–æ–≤–∏—Ç—Å—è.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É `Settings`.
2. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π).
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, –Ω–∞–∂–∞–≤ `Save`.

–ù–∞—á–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –∏—Ç–æ–≥–æ–≤–æ–º –±–∞–ª–∞–Ω—Å–µ –æ—Ç—á—ë—Ç–æ–≤.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏

–í–æ –≤–∫–ª–∞–¥–∫–µ `Settings`, –≤ –±–ª–æ–∫–µ `Mandatory Expenses` –¥–æ—Å—Ç—É–ø–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏:

- `Add` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥.
- `Delete` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π.
- `Delete All` ‚Äî —É–¥–∞–ª–∏—Ç—å –≤—Å–µ.
- `Add to Report` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ –≤ –æ—Ç—á—ë—Ç —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π.
- –°–µ–ª–µ–∫—Ç–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞.
- `Import` ‚Äî –∏–º–ø–æ—Ä—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.
- `Export` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.

–ü–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞:

- `Amount`, `Currency`, `Category` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Mandatory`), `Description` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ), `Period` (`daily`, `weekly`, `monthly`, `yearly`).

–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤:

- –ò–º–ø–æ—Ä—Ç: `CSV`, `XLSX`.
- –≠–∫—Å–ø–æ—Ä—Ç: `CSV`, `XLSX`.

### –ò–º–ø–æ—Ä—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π

–ò–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Import` –≤–æ –≤–∫–ª–∞–¥–∫–µ `Operations`.

–§–æ—Ä–º–∞—Ç—ã:

- `CSV`, `XLSX`, `JSON` (–¥–ª—è Full Backup).
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ñ–∞–π–ª–∞.

–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:

- **CSV/XLSX –¥–∞–Ω–Ω—ã—Ö (import/export):**  
  `date,type,category,amount_original,currency,rate_at_operation,amount_kzt,description,period`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è legacy-–∏–º–ø–æ—Ä—Ç (—Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —Å –ø–æ–ª–µ–º `amount` –∏–ª–∏ —Å –∫–æ–ª–æ–Ω–∫–æ–π `Amount (KZT)`).
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ñ–∞–π–ª–∞.

–í–∞–∂–Ω–æ:

- `CSV/XLSX –æ—Ç—á—ë—Ç–∞` –∏ `CSV/XLSX –¥–∞–Ω–Ω—ã—Ö` ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã.
- `CSV/XLSX –æ—Ç—á—ë—Ç–∞` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ **–Ω–µ –¥–æ–ª–∂–µ–Ω** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞.

### ImportPolicy

–î–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∑–∞–ø–∏—Å–µ–π –¥–æ—Å—Ç—É–ø–Ω—ã 3 —Ä–µ–∂–∏–º–∞:

- `Full Backup` (`ImportPolicy.FULL_BACKUP`)  
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫—É—Ä—Å–æ–º –æ–ø–µ—Ä–∞—Ü–∏–∏. –û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫:
  `date,type,category,amount_original,currency,rate_at_operation,amount_kzt,description,period`.
- `Import Records (Current Rate)` (`ImportPolicy.CURRENT_RATE`)  
  –î–ª—è –∫–∞–∂–¥–æ–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–π —Å—Ç—Ä–æ–∫–∏ –∫—É—Ä—Å –±–µ—Ä—ë—Ç—Å—è –Ω–∞ –º–æ–º–µ–Ω—Ç –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ `CurrencyService.get_rate(currency)`, –∞ `rate_at_operation` –∏ `amount_kzt` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ.
- `Legacy Import` (`ImportPolicy.LEGACY`)  
  –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç `date,type,category,amount` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–æ–≤—ã–π:
  `currency="KZT"`, `rate_at_operation=1.0`, `amount_kzt=amount`.

–í—Å–µ —Ä–µ–∂–∏–º—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç –ø–æ—Å—Ç—Ä–æ—á–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –æ—Ç—á—ë—Ç:
`(imported, skipped, errors)`.

### Backup

–ü–æ–ª–Ω—ã–π backup —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`:

- –ü–æ–ª—è: `initial_balance`, `records`, `mandatory_expenses`.
- –í–∫–ª–∞–¥–∫–∞ `Settings` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏:
  - `Export Full Backup`
  - `Import Full Backup`

Backup –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç:

- –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å;
- –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å –ø–æ–ª—è–º–∏ `amount_original/currency/rate_at_operation/amount_kzt`;
- –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã —Å `description/period`.

### FX Revaluation

`Report` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- `total_fixed()` ‚Äî –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π –∏—Ç–æ–≥ –ø–æ –∫—É—Ä—Å—É –Ω–∞ –¥–∞—Ç—É –æ–ø–µ—Ä–∞—Ü–∏–∏;
- `total_current(currency_service)` ‚Äî –∏—Ç–æ–≥ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É;
- `fx_difference(currency_service)` ‚Äî –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞ (`current - fixed`);
- `total()` ‚Äî alias –¥–ª—è `total_fixed()` (backward compatibility).

### Migration

–ü—Ä–∞–≤–∏–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:

- legacy `amount` -> `amount_original`;
- –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è –≤–∞–ª—é—Ç–∞ -> `KZT`;
- –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∫—É—Ä—Å -> `1.0`;
- –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π `amount_kzt` -> –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ –ø–æ–ª–∏—Ç–∏–∫–µ –∏–º–ø–æ—Ä—Ç–∞;
- –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫.

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `records.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

–§–æ—Ä–º–∞—Ç:

```json
{
  "initial_balance": 50000.0,
  "records": [
    {
      "type": "income",
      "date": "2025-01-15",
      "amount_original": 700.0,
      "currency": "USD",
      "rate_at_operation": 500.0,
      "amount_kzt": 350000.0,
      "category": "–ó–∞—Ä–ø–ª–∞—Ç–∞"
    },
    {
      "type": "expense",
      "date": "2025-01-16",
      "amount_original": 25000.0,
      "currency": "KZT",
      "rate_at_operation": 1.0,
      "amount_kzt": 25000.0,
      "category": "–ü—Ä–æ–¥—É–∫—Ç—ã"
    },
    {
      "type": "mandatory_expense",
      "date": "2025-01-20",
      "amount_original": 300.0,
      "currency": "USD",
      "rate_at_operation": 500.0,
      "amount_kzt": 150000.0,
      "category": "Mandatory",
      "description": "Monthly rent",
      "period": "monthly"
    }
  ],
  "mandatory_expenses": [
    {
      "date": "",
      "amount_original": 300.0,
      "currency": "USD",
      "rate_at_operation": 500.0,
      "amount_kzt": 150000.0,
      "category": "Mandatory",
      "description": "Monthly rent",
      "period": "monthly"
    }
  ]
}
```

---

## üåê –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í–µ–±‚Äë–≤–µ—Ä—Å–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `web/` –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞). –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage` –±—Ä–∞—É–∑–µ—Ä–∞.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤, —Ä–∞—Å—Ö–æ–¥–æ–≤, –æ—Ç—á—ë—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—É—Ä—Å–æ–≤ –ù–ë –†–ö —á–µ—Ä–µ–∑ RSS (`rates_all.xml`) —Å –¥–Ω–µ–≤–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ `localStorage`.
- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –≤ `CSV` (–≤–µ–±‚Äë–≤–µ—Ä—Å–∏—è).

–ó–∞–ø—É—Å–∫: –æ—Ç–∫—Ä–æ–π—Ç–µ `web/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç —Å–ª–æ–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

- `domain/` ‚Äî –±–∏–∑–Ω–µ—Å‚Äë–º–æ–¥–µ–ª–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ (–∑–∞–ø–∏—Å–∏, –æ—Ç—á—ë—Ç—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç –∏ –ø–µ—Ä–∏–æ–¥–æ–≤, –≤–∞–ª—é—Ç—ã).
- `app/` ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (use cases) –∏ –∞–¥–∞–ø—Ç–µ—Ä —Å–µ—Ä–≤–∏—Å–∞ –≤–∞–ª—é—Ç.
- `infrastructure/` ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (JSON‚Äë—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π).
- `utils/` ‚Äî –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.
- `gui/` ‚Äî GUI —Å–ª–æ–π (Tkinter).
- `web/` ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è GUI:

- UI (Tkinter) ‚Üí `app/use_cases.py` ‚Üí `infrastructure/repositories.py` ‚Üí `records.json`.

---

## üìù –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API

–ù–∏–∂–µ ‚Äî –∫–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º.

### Domain

`domain/currency.py`

- `CurrencyService` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –≤ –±–∞–∑–æ–≤—É—é (`KZT`).

`domain/import_policy.py`

- `ImportPolicy` ‚Äî import policy (enum).

`domain/records.py`

- `Record` ‚Äî –±–∞–∑–æ–≤–∞—è –∑–∞–ø–∏—Å—å (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å).
- `IncomeRecord` ‚Äî –¥–æ—Ö–æ–¥.
- `ExpenseRecord` ‚Äî —Ä–∞—Å—Ö–æ–¥.
- `MandatoryExpenseRecord` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ —Å `description` –∏ `period`.

`domain/reports.py`

- `Report(records, initial_balance=0.0)` ‚Äî –æ—Ç—á—ë—Ç.
- `total_fixed()` ‚Äî –∏—Ç–æ–≥ –ø–æ –∫—É—Ä—Å—É –æ–ø–µ—Ä–∞—Ü–∏–∏ (–±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —Ä–µ–∂–∏–º).
- `total_current(currency_service)` ‚Äî –∏—Ç–æ–≥ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É.
- `fx_difference(currency_service)` ‚Äî –∫—É—Ä—Å–æ–≤–∞—è —Ä–∞–∑–Ω–∏—Ü–∞.
- `total()` ‚Äî –∞–ª–∏–∞—Å `total_fixed()` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
- `opening_balance(start_date)` ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –Ω–∞ –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞: `initial_balance + –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å date < start_date`.
- `filter_by_period(prefix)` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –¥–∞—Ç—ã.
- `filter_by_category(category)` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
- `grouped_by_category()` ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
- `monthly_income_expense_rows(year=None, up_to_month=None)` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ –º–µ—Å—è—Ü–∞–º.
- `monthly_income_expense_table(year=None, up_to_month=None)` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –ø–æ –º–µ—Å—è—Ü–∞–º.
- `as_table(summary_mode="full"|"total_only")` ‚Äî —Ç–∞–±–ª–∏—á–Ω—ã–π –≤—ã–≤–æ–¥.
- `to_csv(filepath)` –∏ `from_csv(filepath)` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –∏ backward-compatible –∏–º–ø–æ—Ä—Ç.

`domain/validation.py`

- `parse_ymd(value)` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã `YYYY-MM-DD`.
- `ensure_not_future(date)` ‚Äî –∑–∞–ø—Ä–µ—Ç –±—É–¥—É—â–∏—Ö –¥–∞—Ç.
- `ensure_valid_period(period)` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–∏–æ–¥–æ–≤.

### Application

`app/services.py`

- `CurrencyService(rates=None, base="KZT", use_online=False)` ‚Äî –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
- –ü—Ä–∏ `use_online=True` –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å—ã –ù–ë –†–ö –∏ –∫—ç—à–∏—Ä—É–µ—Ç –≤ `currency_rates.json`.

`app/use_cases.py`

- `CreateIncome.execute(date, amount, currency, category)`.
- `CreateExpense.execute(date, amount, currency, category)`.
- `GenerateReport.execute()` ‚Üí `Report` —Å —É—á—ë—Ç–æ–º –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞.
- `DeleteRecord.execute(index)`.
- `DeleteAllRecords.execute()`.
- `ImportFromCSV.execute(filepath)` ‚Äî –∏–º–ø–æ—Ä—Ç –∏ –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π (CSV, `ImportPolicy.FULL_BACKUP`).
- `CreateMandatoryExpense.execute(amount, currency, category, description, period)`.
- `GetMandatoryExpenses.execute()`.
- `DeleteMandatoryExpense.execute(index)`.
- `DeleteAllMandatoryExpenses.execute()`.
- `AddMandatoryExpenseToReport.execute(index, date)`.

### Infrastructure

`infrastructure/repositories.py`

- `RecordRepository` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
- `JsonFileRecordRepository(file_path="records.json")` ‚Äî JSON‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

–ú–µ—Ç–æ–¥—ã:

- `save(record)`.
- `load_all()`.
- `delete_by_index(index)`.
- `delete_all()`.
- `save_initial_balance(balance)`.
- `load_initial_balance()`.
- `save_mandatory_expense(expense)`.
- `load_mandatory_expenses()`.
- `delete_mandatory_expense_by_index(index)`.
- `delete_all_mandatory_expenses()`.

### GUI

`gui/tkinter_gui.py`

- `FinancialApp` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Tkinter.
- –í–∫–ª–∞–¥–∫–∞ `Reports` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 2 —Ä–µ–∂–∏–º–∞ –∏—Ç–æ–≥–æ–≤:
  - `–ü–æ –∫—É—Ä—Å—É –æ–ø–µ—Ä–∞—Ü–∏–∏`
  - `–ü–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É`
- –ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π (`FX Difference`).
- –ú–µ—Å—è—á–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ (`amount_kzt`).

–ú–µ—Ç–æ–¥—ã:

- `infographics_tab(parent)`.
- `operations_tab(parent)`:
  - `save_record()`.
  - `delete_selected()`.
  - `delete_all()`.
  - `import_records()`.
  - `import_records_data()`.
  - `export_records_data()`.
- `reports_tab(parent)`.
  - `generate()`.
  - `export_any()`.
- `settings_tab(parent)`.
  - `save_balance()`.
  - `refresh_mandatory()`.
  - `add_mandatory_inline()`.
  - `add_to_report_inline()`.
  - `delete_mandatory()`.
  - `delete_all_mandatory()`.
  - `import_mand()`.
  - `export_mand()`.
  - `import_backup()`.
  - `export_backup()`.

`gui/exporters.py`

- `export_report(report, filepath, fmt)`.
- `export_mandatory_expenses(expenses, filepath, fmt)`.
- `export_records(records, filepath, fmt, initial_balance)`.
- `export_full_backup(filepath, initial_balance, records, mandatory_expenses)`.

`gui/importers.py`

- `import_records_from_csv(filepath, policy, currency_service)` -> `(records, initial_balance, (imported, skipped, errors))`.
- `import_records_from_xlsx(filepath, policy, currency_service)` -> `(records, initial_balance, (imported, skipped, errors))`.
- `import_mandatory_expenses_from_csv(filepath, policy, currency_service)` -> `(expenses, (imported, skipped, errors))`.
- `import_mandatory_expenses_from_xlsx(filepath, policy, currency_service)` -> `(expenses, (imported, skipped, errors))`.
- `import_full_backup(filepath)` -> `(initial_balance, records, mandatory_expenses, (imported, skipped, errors))`.

`gui/helpers.py`

- `open_in_file_manager(path)`
- `safe_destroy(window)` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –æ–∫–Ω–∞.
- `safe_focus(window)` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫–Ω–∞.

### Utils

`utils/backup.py`

- `create_full_backup(filepath, initial_balance, records, mandatory_expenses)`.
- `load_full_backup(filepath)`.

`utils/csv_utils.py`

- `report_to_csv(report, filepath)`.
- `report_from_csv(filepath)`.
- `export_records_to_csv(records, filepath, initial_balance)`.
- `import_records_from_csv(filepath, policy, currency_service)`.
- `export_mandatory_expenses_to_csv(expenses, filepath)`.
- `import_mandatory_expenses_from_csv(filepath, policy, currency_service)`.

`utils/excel_utils.py`

- `report_to_xlsx(report, filepath)`.
- `report_from_xlsx(filepath)`.
- `export_records_to_xlsx(records, filepath, initial_balance)`.
- `import_records_from_xlsx(filepath, policy, currency_service)`.
- `export_mandatory_expenses_to_xlsx(expenses, filepath)`.
- `import_mandatory_expenses_from_xlsx(filepath, policy, currency_service)`.

`utils/pdf_utils.py`

- `report_to_pdf(report, filepath)`.

`utils/charting.py`

- `aggregate_expenses_by_category(records)`.
- `aggregate_daily_cashflow(records, year, month)`.
- `aggregate_monthly_cashflow(records, year)`.
- `extract_years(records)`.
- `extract_months(records)`.

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
project/
‚îÇ
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ records.json                # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–ø–∏—Å–µ–π (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ currency_rates.json         # –ö—ç—à –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç (use_online=True)
‚îú‚îÄ‚îÄ requirements.txt            # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ pytest.ini                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
‚îú‚îÄ‚îÄ README.md                   # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ README_EN.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
‚îú‚îÄ‚îÄ CHANGELOG.md                # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ LICENSE                     # –õ–∏—Ü–µ–Ω–∑–∏—è
‚îÇ
‚îú‚îÄ‚îÄ app/                        # Application layer
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ services.py             # CurrencyService –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ use_cases.py            # Use cases
‚îÇ
‚îú‚îÄ‚îÄ domain/                     # Domain layer
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ records.py              # –ó–∞–ø–∏—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ reports.py              # –û—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ currency.py             # –î–æ–º–µ–Ω–Ω—ã–π CurrencyService
‚îÇ   ‚îú‚îÄ‚îÄ validation.py           # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç –∏ –ø–µ—Ä–∏–æ–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ import_policy.py        # –ü–æ–ª–∏—Ç–∏–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/             # Infrastructure layer
‚îÇ   ‚îî‚îÄ‚îÄ repositories.py         # JSON-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ
‚îú‚îÄ‚îÄ utils/                      # –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∏ –≥—Ä–∞—Ñ–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ backup_utils.py         # –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ import_core.py          # –í–∞–ª–∏–¥–∞—Ç–æ—Ä –∏–º–ø–æ—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ charting.py             # –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ csv_utils.py
‚îÇ   ‚îú‚îÄ‚îÄ excel_utils.py
‚îÇ   ‚îî‚îÄ‚îÄ pdf_utils.py
‚îÇ
‚îú‚îÄ‚îÄ gui/                        # GUI —Å–ª–æ–π (Tkinter)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ tkinter_gui.py          # –û—Å–Ω–æ–≤–Ω–æ–µ GUI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ helpers.py              # –ü–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è GUI
‚îÇ   ‚îú‚îÄ‚îÄ importers.py            # –ò–º–ø–æ—Ä—Ç –∑–∞–ø–∏—Å–µ–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ backup
‚îÇ   ‚îî‚îÄ‚îÄ exporters.py            # –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤, –∑–∞–ø–∏—Å–µ–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ backup
‚îÇ
‚îú‚îÄ‚îÄ web/                        # –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ styles.css
‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ
‚îî‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ test_charting.py
    ‚îú‚îÄ‚îÄ test_csv.py
    ‚îú‚îÄ‚îÄ test_currency.py
    ‚îú‚îÄ‚îÄ test_excel.py
    ‚îú‚îÄ‚îÄ test_gui_exporters_importers.py
    ‚îú‚îÄ‚îÄ test_import_policy_and_backup.py
    ‚îú‚îÄ‚îÄ test_pdf.py
    ‚îú‚îÄ‚îÄ test_records.py
    ‚îú‚îÄ‚îÄ test_reports.py
    ‚îú‚îÄ‚îÄ test_repositories.py
    ‚îú‚îÄ‚îÄ test_services.py
    ‚îú‚îÄ‚îÄ test_use_cases.py
    ‚îî‚îÄ‚îÄ test_validation.py
```

---

## üß™ –¢–µ—Å—Ç—ã

### –ó–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd "–ü—Ä–æ–µ–∫—Ç –§–£/project"

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/test_records.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/test_reports.py::test_report_total -v
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ

```bash
pip install pytest-cov
pytest --cov=. --cov-report=term-missing
pytest --cov=. --cov-report=html
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** —Ç–µ—Å—Ç—ã –æ–∂–∏–¥–∞—é—Ç, —á—Ç–æ `CurrencyService` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã (–ø–∞—Ä–∞–º–µ—Ç—Ä `use_online=False`).

---

## üí± –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã

–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫—É—Ä—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

| –í–∞–ª—é—Ç–∞              | –ö–æ–¥ | –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫—É—Ä—Å | –û–ø–∏—Å–∞–Ω–∏–µ        |
| ------------------- | --- | -------------- | --------------- |
| –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ç–µ–Ω–≥–µ | KZT | 1.0            | –ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞  |
| –î–æ–ª–ª–∞—Ä –°–®–ê          | USD | 500.0          | 1 USD = 500 KZT |
| –ï–≤—Ä–æ                | EUR | 590.0          | 1 EUR = 590 KZT |
| –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å    | RUB | 6.5            | 1 RUB = 6.5 KZT |

–ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å `CurrencyService(use_online=True)`, —Ç–æ –∫—É—Ä—Å—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å –ù–ë –†–ö –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `currency_rates.json`.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ.
